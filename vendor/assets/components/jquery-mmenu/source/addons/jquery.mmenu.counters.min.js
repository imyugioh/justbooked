/*	
 * jQuery mmenu counters addon
 * @requires mmenu 4.0.0 or later
 *
 * mmenu.frebsite.nl
 *	
 * Copyright (c) Fred Heusschen
 * www.frebsite.nl
 *
 * Dual licensed under the MIT and GPL licenses.
 * http://en.wikipedia.org/wiki/MIT_License
 * http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


!function(a){var b="mmenu",c="counters";a[b].prototype["_addon_"+c]=function(){var e=this.opts[c],f=a[b]._c,g=a[b]._d,h=a[b]._e;f.add("counter noresults"),h.add("update"),"boolean"==typeof e&&(e={add:e,update:e}),"object"!=typeof e&&(e={}),e=a.extend(!0,{},a[b].defaults[c],e),e.count&&(a[b].deprecated('the option "count" for counters, the option "update"'),e.update=e.count),this.__refactorClass(a("em."+this.conf.counterClass,this.$menu),"counter"),e.add&&a("."+f.panel,this.$menu).each(function(){var b=a(this),c=b.data(g.parent);if(c){var d=a('<em class="'+f.counter+'" />'),e=c.find("> a."+f.subopen);e.parent().find("em."+f.counter).length||e.before(d)}}),e.update&&a("em."+f.counter,this.$menu).each(function(){var b=a(this),c=a(b.next().attr("href"),this.$menu);c.is("."+f.list)||(c=c.find("> ."+f.list)),c.length&&b.off(h.update).on(h.update,function(a){a.stopPropagation();var d=c.children().not("."+f.label).not("."+f.subtitle).not("."+f.hidden).not("."+f.noresults);b.html(d.length)})}).trigger(h.update)},a[b].defaults[c]={add:!1,update:!1},a[b].configuration.counterClass="Counter",a[b].addons=a[b].addons||[],a[b].addons.push(c)}(jQuery);