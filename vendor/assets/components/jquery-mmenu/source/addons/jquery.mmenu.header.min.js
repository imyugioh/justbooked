/*	
 * jQuery mmenu header addon
 * @requires mmenu 4.0.0 or later
 *
 * mmenu.frebsite.nl
 *	
 * Copyright (c) Fred Heusschen
 * www.frebsite.nl
 *
 * Dual licensed under the MIT and GPL licenses.
 * http://en.wikipedia.org/wiki/MIT_License
 * http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


!function(a){var b="mmenu",c="header";a[b].prototype["_addon_"+c]=function(){var d=this,e=this.opts[c],f=this.conf[c];if("horizontal"==this.direction){var g=a[b]._c,i=(a[b]._d,a[b]._e);g.add("header hasheader prev next"),i.add("setheader");var j=a[b].glbl;"boolean"==typeof e&&(e={add:e,update:e}),"object"!=typeof e&&(e={}),e=a.extend(!0,{},a[b].defaults[c],e),e.add&&a('<div class="'+g.header+'" />').prependTo(this.$menu).append('<a class="'+g.prev+'" href="#"></a>').append("<span></span>").append('<a class="'+g.next+'" href="#"></a>');var k=a("div."+g.header,this.$menu);if(k.length&&this.$menu.addClass(g.hasheader),e.update&&k.length){var l=k.find("span"),m=k.find("."+g.prev),n=k.find("."+g.next),o="#"+j.$page.attr("id");m.add(n).on(i.click,function(b){b.preventDefault(),b.stopPropagation();var c=a(this).attr("href");"#"!==c&&(c==o?d.$menu.trigger(i.close):a(c,d.$menu).trigger(i.open))}),a("."+g.panel,this.$menu).each(function(){var b=a(this),c=a("."+f.panelHeaderClass,b).text(),d=a("."+f.panelPrevClass,b).attr("href"),h=a("."+f.panelNextClass,b).attr("href");c||(c=a("."+g.subclose,b).text()),c||(c=e.title),d||(d=a("."+g.subclose,b).attr("href")),b.off(i.setheader).on(i.setheader,function(a){a.stopPropagation(),l[c?"show":"hide"]().text(c),m[d?"show":"hide"]().attr("href",d),n[h?"show":"hide"]().attr("href",h)}),b.on(i.open,function(){a(this).trigger(i.setheader)})}).filter("."+g.current).trigger(i.setheader)}}},a[b].defaults[c]={add:!1,update:!1,title:"Menu"},a[b].configuration[c]={panelHeaderClass:"Header",panelNextClass:"Next",panelPrevClass:"Prev"},a[b].addons=a[b].addons||[],a[b].addons.push(c)}(jQuery);